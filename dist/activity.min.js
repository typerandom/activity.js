!function(t){function n(i){if(e[i])return e[i].exports;var c=e[i]={exports:{},id:i,loaded:!1};return t[i].call(c.exports,c,c.exports,n),c.loaded=!0,c.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n){!function(){function t(n){function e(t,n){if(n||(n=[]),t in d)for(var e=0;e<d[t].length;e++)d[t][e].apply(null,n)}function i(t,n){if(l!==t||n===!0)switch(l=t){case s.Inactive:e("inactive");break;case s.Active:e("active")}}function c(){var t=null;t=++w>=n.inactiveAfter?s.Inactive:s.Active,i(t)}function a(){w=0,clearTimeout(h),i(s.Active)}function o(){clearTimeout(h),h=setTimeout(function(){i(s.Inactive)},50)}function r(){document.hidden?a():i(s.Inactive)}function v(t,n,e){t.addEventListener?t.addEventListener(n,e):t.attachEvent&&t.attachEvent(n,e)}function u(t,n,e){t.removeEventListener?t.removeEventListener(n,e):t.detachEvent&&t.detachEvent(n,e)}var s=t.State,d={},f=!1,l=s.Unknown,w=0,y=null,h=null;n||(n={});var p={inactiveAfter:60,inactiveOnLostFocus:!0,inactiveOnNoVisibility:!0,inactiveOnMouseInactivity:!0,inactiveOnKeyboardInactivity:!0};for(var m in p){var b=p[m];m in n||(n[m]=b)}return{start:function(){return f?!1:(f=!0,y=setInterval(c,1e3),n.inactiveOnMouseInactivity&&v(window,"mousemove",a),n.inactiveOnKeyboardInactivity&&v(window,"keypress",a),n.inactiveOnLostFocus&&(v(window,"blur",o),v(window,"focus",a)),n.inactiveOnNoVisibility&&v(document,"visibilitychange",r),e("started"),!0)},state:function(){return l},on:function(t,n){t in d||(d[t]=[]),d[t].push(n)},replayState:function(){i(l,!0)},stop:function(){return f?(f=!1,l=s.Unknown,clearTimeout(y),n.inactiveOnMouseInactivity&&u(window,"mousemove",a),n.inactiveOnKeyboardInactivity&&u(window,"keypress",a),n.inactiveOnLostFocus&&(u(window,"blur",o),u(window,"focus",a)),n.inactiveOnNoVisibility&&u(document,"visibilitychange",r),e("stopped"),!0):!1}}}t.State={Unknown:0,Inactive:1,Active:2},Object.freeze(t.State),t.detect=function(n){if(t._instance)return!1;var e=t._instance=new t(n);return e.on("inactive",function(){window.dispatchEvent(new CustomEvent("user_inactive"))}),e.on("active",function(){window.dispatchEvent(new CustomEvent("user_active"))}),e.start(),!0},t.on=function(n,e){var i=t._instance;if(!i)throw new Error("Activity.detect() hasn't been called.");return i.on(event,handler)},t.state=function(){var n=t._instance;if(!n)throw new Error("Activity.detect() hasn't been called.");return n.state()},t.replayState=function(){var n=t._instance;if(!n)throw new Error("Activity.detect() hasn't been called.");return n.replayState()},window.Activity=t}()}]);
//# sourceMappingURL=activity.min.js.map